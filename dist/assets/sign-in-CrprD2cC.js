import{a5 as E,r as s,t as k,j as e,B as d,T as p,d as L,I as A,H as B}from"./index-DNJ-7_Rf.js";import{C as F}from"./config-global-CwnLHF89.js";import{G as u}from"./Grid-BaR81AYS.js";import{T as f}from"./TextField-DrqQKz-z.js";import{I as T}from"./InputAdornment-CuTnuXim.js";import{L as D}from"./LoadingButton-ibHk8LjJ.js";import"./Select-C6NYPjTS.js";import"./useControlled-CYejl48w.js";import"./CircularProgress-DypZclCl.js";function W(){const{login:I}=E(),[a,j]=s.useState(""),[r,b]=s.useState(""),[m,x]=s.useState(""),[y,i]=s.useState(!1),[l,w]=s.useState(!1),[o,h]=s.useState([]),[S,v]=s.useState(0),g=s.useCallback(async()=>{const t=await fetch(`${k}/api/login`);if(t.status!==200)return;const n=await t.json();h(n)},[h]);s.useEffect(()=>{g()},[g]),s.useEffect(()=>{const t=setInterval(()=>{o.length!==0&&v(n=>(n+1)%o.length)},5e3);return()=>clearInterval(t)},[o.length]);const C=async()=>{if(!r||!a){c("Ingrese un correo electrónico y una contraseña");return}if(!/\S+@\S+\.\S+/.test(r)){c("Ingrese un correo electrónico válido");return}i(!0);const{message:t,isSuccessful:n}=await I(r,a);n||(c(t),i(!1)),i(!1)},c=t=>{x(t),setTimeout(()=>{x("")},3e3)},P=e.jsxs(d,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:[e.jsx(f,{fullWidth:!0,name:"email",label:"Correo",InputLabelProps:{shrink:!0},sx:{mb:3},value:r,onChange:t=>b(t.target.value)}),e.jsx(f,{fullWidth:!0,name:"password",label:"Contraseña",InputLabelProps:{shrink:!0},type:l?"text":"password",InputProps:{endAdornment:e.jsx(T,{position:"end",children:e.jsx(L,{onClick:()=>w(!l),edge:"end",children:e.jsx(A,{icon:l?"solar:eye-bold":"solar:eye-closed-bold"})})})},sx:{mb:3},value:a,onChange:t=>j(t.target.value)}),m&&e.jsx(p,{variant:"body2",color:"error",sx:{mb:1.5},children:m}),e.jsx(D,{fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"contained",onClick:C,loading:y,children:"Sign in"})]});return e.jsxs(u,{container:!0,sx:{bgColor:"blue",width:"100%",height:"100vh"},children:[e.jsx(u,{item:!0,xs:0,md:6,sx:{position:"relative",overflow:"hidden"},children:o.map((t,n)=>e.jsx("img",{src:t.img,alt:t.nombre,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",opacity:n===S?1:0,transition:"opacity 1s ease-in-out"}},t.id))}),e.jsx(u,{item:!0,xs:12,md:6,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs(d,{sx:{py:5,px:3,width:1,borderRadius:2,display:"flex",flexDirection:"column",bgcolor:"background.default",maxWidth:"var(--layout-auth-content-width)"},children:[e.jsx(d,{gap:1.5,display:"flex",flexDirection:"column",alignItems:"center",sx:{mb:5},children:e.jsx(p,{variant:"h5",children:"Sign in"})}),P]})})]})}function U(){return e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsxs("title",{children:[" ",`Sign in - ${F.appName}`]})}),e.jsx(W,{})]})}export{U as default};
